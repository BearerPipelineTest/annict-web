<% title = t "head.title.records.index", profile_name: @user_entity.name, username: @user_entity.username %>
<% description = meta_description t("head.meta.description.records.index", profile_name: @user_entity.name, username: @user_entity.username) %>
<% image_url = @user_entity.avatar_url %>
<% set_meta_tags(title: title, description: description, og: { description: description, image: image_url }, twitter: { description: description, image: image_url }, reverse: true, prefix: false) %>

<%= render ProfileHeaderComponent.new(user_entity: @user_entity, current_user: current_user) %>

<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-lg-9">
      <div class="mb-3">
        <%= render Lists::RecordListComponent.new(viewer: current_user, record_entities: @record_entities) %>
      </div>

      <%= render PaginationComponent.new(page_info_entity: @page_info_entity, resources_path: current_path_with_query) %>
    </div>

    <div class="col-12 col-lg-3 py-3">
      <div class="list-group">
        <%= active_link_to record_list_path(@user_entity.username),
            class: "align-items-center d-flex justify-content-between list-group-item",
            class_active: "active",
            active: params[:controller] == "v4/records" && params[:month].blank? do
        %>
          <%= t "noun.all" %>
          <span class="badge badge-pill badge-primary">
            <%= @months.values.reduce(&:+) %>
          </span>
        <% end %>

        <% @months.each do |month, count| %>
          <% if count > 0 %>
            <%= active_link_to record_list_path(@user_entity.username, month: month.to_s(:ym)),
                class: "align-items-center d-flex justify-content-between list-group-item",
                class_active: "active",
                active: params[:month] == month.to_s(:ym) do
            %>
              <%= month.to_s(:ym) %>

              <span class="badge badge-pill badge-primary">
              <%= count %>
            </span>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
